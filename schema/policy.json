{
  "$schema": "",
  "type": "object",
  "definitions": {
    "order1_statement": {
      "$schema": "",
      "title": "Statement",
      "description": "Policy statement",
      "strictProperties": true,
      "type": "object",
      "definitions": {
        "effect": {
          "description": "allow/deny resources",
          "example": "allow",
          "type": "string"
        },
        "action": {
          "description": "Operations over resources",
          "example": ["iam:getUser", "iam:*"],
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "resources": {
          "description": "resources",
          "example": ["urn:everything:*"],
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "properties": {
        "effect": {
          "$ref": "#/definitions/order1_statement/definitions/effect"
        },
        "action": {
          "$ref": "#/definitions/order1_statement/definitions/action"
        },
        "resources": {
          "$ref": "#/definitions/order1_statement/definitions/resources"
        }
      }
    },
    "order2_policy": {
      "$schema": "",
      "title": "Policy",
      "description": "Policy API",
      "strictProperties": true,
      "type": "object",
      "definitions": {
        "id": {
          "description": "Unique policy identifier",
          "readOnly": true,
          "format": "uuid",
          "type": "string"
        },
        "name": {
          "description": "Policy name",
          "example": "policy1",
          "type": "string"
        },
        "path": {
          "description": "Policy location",
          "example": "/example/admin/",
          "type": "string"
        },
        "createdAt": {
          "description": "Policy creation date",
          "format": "date-time",
          "type": "string"
        },
        "urn": {
          "description": "Policy's Uniform Resource Name",
          "example": "urn:iws:iam:org1:policy/example/admin/policy1",
          "type": "string"
        },
        "org": {
          "description": "Policy organization",
          "example": "tecsisa",
          "type": "string"
        },
        "statements": {
          "description": "Policy statements",
          "type": "array",
          "items": {
            "$ref": "#/definitions/order1_statement"
          }
        }
      },
      "links": [
        {
          "description": "Create a new policy.",
          "href": "/api/v1/organizations/{organization_id}/policies",
          "method": "POST",
          "rel": "create",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "schema": {
            "properties": {
              "name": {
                "$ref": "#/definitions/order2_policy/definitions/name"
              },
              "path": {
                "$ref": "#/definitions/order2_policy/definitions/path"
              },
              "statements": {
                "$ref": "#/definitions/order2_policy/definitions/statements"
              }
            },
            "required": [
              "name",
              "path",
              "statements"
            ],
            "type": "object"
          },
          "title": "Create"
        },
        {
          "description": "Update an existing policy.",
          "href": "/api/v1/organizations/{organization_id}/policies/{policy_name}",
          "method": "PUT",
          "rel": "update",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "schema": {
            "properties": {
              "name": {
                "$ref": "#/definitions/order2_policy/definitions/name"
              },
              "path": {
                "$ref": "#/definitions/order2_policy/definitions/path"
              },
              "statements": {
                "$ref": "#/definitions/order2_policy/definitions/statements"
              }
            },
            "required": [
              "name",
              "path",
              "statements"
            ],
            "type": "object"
          },
          "title": "Update"
        },
        {
          "description": "Delete an existing policy.",
          "href": "/api/v1/organizations/{organization_id}/policies/{policy_name}",
          "method": "DELETE",
          "rel": "empty",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "title": "Delete"
        },
        {
          "description": "Get an existing policy.",
          "href": "/api/v1/organizations/{organization_id}/policies/{policy_name}",
          "method": "GET",
          "rel": "self",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "title": "Get"
        }
      ],
      "properties": {
        "id": {
          "$ref": "#/definitions/order2_policy/definitions/id"
        },
        "name": {
          "$ref": "#/definitions/order2_policy/definitions/name"
        },
        "path": {
          "$ref": "#/definitions/order2_policy/definitions/path"
        },
        "createdAt": {
          "$ref": "#/definitions/order2_policy/definitions/createdAt"
        },
        "urn": {
          "$ref": "#/definitions/order2_policy/definitions/urn"
        },
        "org": {
          "$ref": "#/definitions/order2_policy/definitions/org"
        },
        "statements": {
          "$ref": "#/definitions/order2_policy/definitions/statements"
        }
      }
    },
    "order3_policyReference": {
      "$schema": "",
      "title": "",
      "description": "",
      "strictProperties": true,
      "type": "object",
      "links": [
        {
          "description": "List all policies by organization.",
          "href": "/api/v1/organizations/{organization_id}/policies?PathPrefix={optional_path_prefix}",
          "method": "GET",
          "rel": "self",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "title": "List all organization's policies"
        },
        {
          "description": "List all policies.",
          "href": "/api/v1/policies?PathPrefix={optional_path_prefix}",
          "method": "GET",
          "rel": "self",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "title": "List all policies"
        }
      ],
      "properties": {
        "policies": {
          "description": "List of policies",
          "type": "array",
          "items": {
            "properties": {
              "org": {
                "$ref": "#/definitions/order2_policy/definitions/org"
              },
              "name": {
                "$ref": "#/definitions/order2_policy/definitions/name"
              }
            }
          }
        }
      }
    },
    "order4_attachedGroups": {
      "$schema": "",
      "title": "",
      "description": "List attached groups",
      "strictProperties": true,
      "type": "object",
      "links": [
        {
          "description": "List attached groups",
          "href": "/api/v1/organizations/{organization_id}/policies/{policy_name}/groups",
          "method": "GET",
          "rel": "self",
          "http_header": {
            "Authorization": "Basic or Bearer XXX"
          },
          "title": "Policy Groups List"
        }
      ],
      "properties": {
        "groups": {
          "description": "Groups attached to this policy",
          "type": "array",
          "items": {
            "properties": {
              "org": {
                "description": "Group organization",
                "example": "tecsisa",
                "type": "string"
              },
              "name": {
                "description": "Group name",
                "example": "group1",
                "type": "string"
              }
            }
          }
        }
      }
    }
  },
  "properties": {
    "order1_statement": {
      "$ref": "#/definitions/order1_statement"
    },
    "order2_policy": {
      "$ref": "#/definitions/order2_policy"
    },
    "order3_policyReference": {
      "$ref": "#/definitions/order3_policyReference"
    },
    "order4_attachedGroups": {
      "$ref": "#/definitions/order4_attachedGroups"
    }
  }
}